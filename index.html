<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GOGO NEURAL OS | PRIYANSU EDITION V14.0</title>
    
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Syncopate:wght@700&family=JetBrains+Mono:wght@200;400;800&display=swap');
        
        :root {
            --neon: #00f2ff;
            --bg: #000408;
            --panel: rgba(0, 242, 255, 0.04);
            --error: #ff0055;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; cursor: crosshair; }

        body {
            background: var(--bg);
            background-image: radial-gradient(circle at center, #001a1f 0%, #000 100%);
            color: #fff;
            font-family: 'JetBrains Mono', monospace;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
        }

        /* MASSIVE SYSTEM GRID */
        .os-wrapper {
            display: grid;
            grid-template-columns: 450px 1fr 400px;
            grid-template-rows: 100px 1fr 140px;
            height: 100vh;
            width: 100vw;
            gap: 25px;
            padding: 30px;
        }

        header {
            grid-column: 1 / span 3;
            border: 2px solid var(--neon);
            border-radius: 25px;
            background: var(--panel);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 60px;
            backdrop-filter: blur(20px);
            box-shadow: 0 0 50px rgba(0, 242, 255, 0.2);
        }

        .os-logo {
            font-family: 'Syncopate';
            font-size: 32px;
            letter-spacing: 20px;
            color: var(--neon);
            text-shadow: 0 0 20px var(--neon);
        }

        .sector {
            border: 2px solid var(--neon);
            border-radius: 45px;
            background: var(--panel);
            padding: 35px;
            display: flex;
            flex-direction: column;
            gap: 25px;
            position: relative;
        }

        /* VISION SYSTEM */
        .vision-engine {
            flex-grow: 1;
            background: #000;
            border-radius: 30px;
            border: 1px solid var(--neon);
            overflow: hidden;
            position: relative;
        }

        #vSource { width: 100%; height: 100%; object-fit: cover; transform: scaleX(-1); opacity: 0.8; }
        #handCanvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; transform: scaleX(-1); z-index: 5; }

        /* NEURAL CORE TERMINAL */
        .terminal-core {
            flex-grow: 1;
            background: rgba(0, 0, 0, 0.95);
            border: 4px solid var(--neon);
            border-radius: 55px;
            padding: 50px;
            overflow-y: auto;
            box-shadow: inset 0 0 100px rgba(0, 242, 255, 0.1);
        }

        .terminal-core::-webkit-scrollbar { width: 5px; }
        .terminal-core::-webkit-scrollbar-thumb { background: var(--neon); border-radius: 10px; }

        .log-line { margin-bottom: 25px; font-size: 19px; line-height: 1.8; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* ORB NEXUS */
        .orb-nexus {
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .orb-core {
            width: 260px;
            height: 260px;
            border-radius: 50%;
            background: radial-gradient(circle at 35% 35%, #fff, var(--neon), #6a00ff);
            box-shadow: 0 0 120px var(--neon);
            cursor: pointer;
            transition: 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .orb-core.active { animation: superPulse 0.4s infinite alternate; }
        @keyframes superPulse { to { transform: scale(1.18); box-shadow: 0 0 250px var(--neon); filter: hue-rotate(45deg); } }

        /* COMMAND HUD */
        .command-hud {
            grid-column: 1 / span 3;
            border: 2px solid var(--neon);
            border-radius: 100px;
            display: flex;
            padding: 0 60px;
            align-items: center;
            background: var(--panel);
            gap: 30px;
            backdrop-filter: blur(15px);
        }

        .neural-input {
            flex: 1;
            background: transparent;
            border: none;
            color: #fff;
            font-size: 26px;
            font-family: inherit;
            outline: none;
        }

        .exe-btn {
            background: var(--neon);
            border: none;
            width: 85px;
            height: 85px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 40px;
            box-shadow: 0 0 30px var(--neon);
        }

        video { display: none; }
    </style>
</head>
<body>

    <div class="os-wrapper">
        <header>
            <div class="os-logo">GOGO_OS_UNBREAKABLE</div>
            <div id="sys-time" style="font-size: 12px; letter-spacing: 5px; color: var(--neon);">[SYSTEM_ONLINE]</div>
        </header>

        <aside class="sector">
            <h2 style="font-size: 11px; letter-spacing: 8px; color: var(--neon);">[OPTIC_SCANNER]</h2>
            <div class="vision-engine">
                <video id="vSource" autoplay playsinline></video>
                <canvas id="handCanvas"></canvas>
            </div>
            <div style="font-size: 10px; line-height: 2.2; opacity: 0.6;">
                PRIYANSU_ID: 1001-A<br>
                UPLINK: STABLE<br>
                REFRESH_RATE: 60HZ
            </div>
        </aside>

        <main class="terminal-core" id="terminal">
            <div class="log-line">
                [SYSTEM] INITIALIZING UNBREAKABLE CORE...<br>
                [UPLINK] TUNNELING THROUGH CORS PROTECTIONS...<br>
                [READY] WAITING FOR MASTER COMMANDS.
            </div>
        </main>

        <aside class="sector">
            <h2 style="font-size: 11px; letter-spacing: 8px; color: var(--neon); text-align: center;">[NEURAL_CORE]</h2>
            <div class="orb-nexus">
                <div class="orb-core" id="masterOrb"></div>
            </div>
            <div style="text-align: center; font-size: 10px; opacity: 0.5;">VOICE_ENGINE: FEMALE_MAX</div>
        </aside>

        <footer class="command-hud">
            <input type="text" id="userInput" class="neural-input" placeholder="EXECUTE NEURAL UPLINK..." autocomplete="off">
            <button class="exe-btn" id="sendBtn">âž”</button>
        </footer>
    </div>

    <script>
        /* ============================================================
           MONOLITHIC ARCHITECTURE - KERNEL LOGIC
           ============================================================ */

        const KERNEL_CONFIG = {
            KEY: "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",
            ENDPOINT: "https://api.openai.com/v1/chat/completions",
            MODEL: "gpt-4o-mini"
        };

        const logBox = document.getElementById('terminal');
        const orb = document.getElementById('masterOrb');
        const input = document.getElementById('userInput');
        const sendBtn = document.getElementById('sendBtn');

        // NEURAL PROCESSOR
        async function runInference(cmd) {
            if(!cmd) return;
            orb.classList.add('active');
            appendLog('PRIYANSU', cmd, 'var(--neon)');
            input.value = "";

            if(!KERNEL_CONFIG.KEY) {
                appendLog('SYSTEM_ERROR', 'API_KEY_NULL. PLEASE INSERT KEY IN CODE.', 'var(--error)');
                orb.classList.remove('active');
                return;
            }

            try {
                // Fetch with Industrial Headers to prevent "Failed to fetch"
                const response = await fetch(KERNEL_CONFIG.ENDPOINT, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "Authorization": `Bearer ${KERNEL_CONFIG.KEY.trim()}`
                    },
                    body: JSON.stringify({
                        model: KERNEL_CONFIG.MODEL,
                        messages: [
                            {role: "system", content: "You are Gogo, the elite female OS for Priyansu. Answer concisely and intellectually."},
                            {role: "user", content: cmd}
                        ],
                        temperature: 0.7
                    })
                });

                if (!response.ok) {
                    const errorDetails = await response.json();
                    throw new Error(errorDetails.error ? errorDetails.error.message : "Access Denied");
                }

                const data = await response.json();
                const resultText = data.choices[0].message.content;

                appendLog('GOGO_OS', resultText, '#00ffaa');
                triggerSpeech(resultText);

            } catch (err) {
                appendLog('NETWORK_FAIL', err.message + " (Check API Balance or Key validity)", 'var(--error)');
                console.error(err);
            } finally {
                orb.classList.remove('active');
                logBox.scrollTop = logBox.scrollHeight;
            }
        }

        function appendLog(tag, msg, color) {
            const div = document.createElement('div');
            div.className = 'log-line';
            div.innerHTML = `<span style="color:${color}; font-weight:800;">[${tag}]</span> ${msg}`;
            logBox.appendChild(div);
            logBox.scrollTop = logBox.scrollHeight;
        }

        // FEMALE VOICE ENGINE
        function triggerSpeech(text) {
            const synth = window.speechSynthesis;
            const msg = new SpeechSynthesisUtterance(text);
            const voices = synth.getVoices();
            const female = voices.find(v => v.name.includes('Samantha') || v.name.includes('Google US English') || v.name.includes('Zira'));
            if(female) msg.voice = female;
            msg.pitch = 1.3;
            msg.rate = 1.0;
            synth.speak(msg);
        }

        // OPTIC SCANNER ENGINE (FRONT CAMERA FIX)
        const video = document.getElementById('vSource');
        const hands = new Hands({locateFile: (file) => `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`});
        
        hands.setOptions({ maxNumHands: 1, minDetectionConfidence: 0.8 });
        hands.onResults((res) => {
            const canvas = document.getElementById('handCanvas');
            const ctx = canvas.getContext('2d');
            canvas.width = video.videoWidth; canvas.height = video.videoHeight;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            if (res.multiHandLandmarks) {
                for (const lm of res.multiHandLandmarks) {
                    drawConnectors(ctx, lm, HAND_CONNECTIONS, {color: '#00f2ff', lineWidth: 4});
                }
            }
        });

        async function startSystemOptics() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({
                    video: { facingMode: "user", width: 1280, height: 720 }
                });
                video.srcObject = stream;
                new Camera(video, {
                    onFrame: async () => { await hands.send({image: video}); }
                }).start();
            } catch (e) {
                appendLog('OPTIC_ERROR', 'CAMERA_PERMISSION_DENIED', 'var(--error)');
            }
        }
        startSystemOptics();

        // CONTROLS
        sendBtn.onclick = () => runInference(input.value);
        input.onkeypress = (e) => { if(e.key === 'Enter') sendBtn.click(); };

        // SPEECH INPUT
        const Recognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        if(Recognition) {
            const rec = new Recognition();
            orb.onclick = () => { 
                rec.start(); 
                appendLog('SYSTEM', 'LISTENING_FOR_MASTER...', '#fff');
            };
            rec.onresult = (e) => runInference(e.results[0][0].transcript);
        }

        setInterval(() => {
            document.getElementById('sys-time').innerText = new Date().toLocaleTimeString() + " | KERNEL_ACTIVE";
        }, 1000);

        window.speechSynthesis.onvoiceschanged = () => window.speechSynthesis.getVoices();
    </script>
</body>
</html>
